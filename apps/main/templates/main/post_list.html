{% extends 'base.html' %}

{% block title %} Posts {% endblock %}

{% block content %}
<h1 class="posts-title">{% if category %}{{ category.name }}{% else %}–í—Å—ñ –ø–æ—Å—Ç–∏{% endif %}</h1>
<div class="sort-buttons">
  <a href="?sort=new" class="sort-btn {% if current_sort == 'new' %}active{% endif %}">–°–ø–æ—á–∞—Ç–∫—É –Ω–æ–≤—ñ</a>
  <a href="?sort=old" class="sort-btn {% if current_sort == 'old' %}active{% endif %}">–°–ø–æ—á–∞—Ç–∫—É —Å—Ç–∞—Ä—ñ</a>
  <a href="?sort=popular" class="sort-btn {% if current_sort == 'popular' %}active{% endif %}">–°–ø–æ—á–∞—Ç–∫—É –ø–æ–ø—É–ª—è—Ä–Ω—ñ</a>
</div>
<div class="posts-container">
  {% for post in posts %}
  <div class="post">
    {% if post.image %}
      <img src="{{ post.image.url }}" alt="{{ post.title }}">
    {% endif %}
    <h2 class="post-title">{{ post.title }}</h2>
    <p class="post-content">{{ post.content|truncatewords:30 }}</p>
    <div class="post-meta">
      <p class="post-author">üë§ {{ post.author }}</p>
      <p class="post-created_at">üìÖ {{ post.created_at|date:"d.m.Y" }}</p>
      <p class="post-updated_at">üëÅÔ∏è {{ post.views }} –ø–µ—Ä–µ–≥–ª—è–¥—ñ–≤</p>
    </div>
    <a href="{{ post.get_absolute_url }}">–ß–∏—Ç–∞—Ç–∏ –¥–∞–ª—ñ ‚Üí</a>
  </div>
  {% empty %}
  <p class="no-posts">–ü–æ—Å—Ç–∏ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.</p>
  {% endfor %}
</div>
{% endblock %}
